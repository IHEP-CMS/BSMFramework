#==========================================
#	TTHEventSelector_setup.txt
#==========================================
#Developer: Joshuha Thomas-Wilsker
#email: joshuha.thomas-wilsker@cern.ch
#==========================================
# NOTE: - If ‘install_mem.sh’ gives an error, remove MEMIntegratorStandalone
#	  package. Replace line in script with the following:
# 	  cp -R $CMSSW_BASE/src/TTH/MEIntegratorStandalone/libs/* $CMSSW_BASE/lib/$SCRAM_ARCH/
#	- DO NOT ‘scram clean’ CommonClassifier as it removes OpenLoops libs.
#	- ‘mem_test’ and ‘bdt_test’ simply run tests to ensure installation works.
#==========================================
source /cvmfs/cms.cern.ch/cmsset_default.sh
export SCRAM_ARCH="slc6_amd64_gcc530"
export CMSSW_VERSION="CMSSW_8_0_24"
cmsrel $CMSSW_VERSION
cd $CMSSW_VERSION/src
export CMSSW_SRC="$( pwd )"
cmsenv
git cms-init
git clone -b TTHEventSelector_branch https://github.com/IHEP-CMS/BSMFramework.git
git cms-merge-topic cms-met:METRecipe_8020
git cms-merge-topic ahinzmann:METRecipe_8020_Moriond17
git cms-merge-topic cms-met:fromCMSSW_8_0_20_postICHEPfilter
git cms-merge-topic ikrav:egm_id_80X_v2
git clone https://github.com/IHEP-CMS/BJetnessTTHbb.git
mkdir TTH
cd TTH
git clone https://github.com/cms-ttH/CommonClassifier.git
source CommonClassifier/setup/install_mem.sh
cd $CMSSW_VERSION/src
git cms-merge-topic Sam-Harper:HEEPV70VID_8010_ReducedCheckout  #brings in HEEP V70 into VID
git cms-merge-topic ikrav:egm_id_80X_v3 # For other E/gamma IDs in VID if you wish to have them
git cms-merge-topic Sam-Harper:PackedCandNoPuppi # Only necessary to run HEEP V70 on AOD (it will crash if this is not present looking for puppi candidates
mkdir -p ../external/slc6_amd64_gcc530/data/RecoEgamma/ElectronIdentification/ #we need this for the mva weights which runs in VID regardless if you need it or not
git clone https://github.com/cms-data/RecoEgamma-ElectronIdentification ../external/slc6_amd64_gcc530/data/RecoEgamma/ElectronIdentification/data #we need this for the mva weights which runs in VID regardless if you need it or not
scram b # -j 3
mem_test
bdt_test
